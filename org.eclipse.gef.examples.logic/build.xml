<project name="BuildPlugin" default="BuildWithoutRuntime" basedir=".">

<property name="pluginName" value="org.eclipse.gef.examples.logic"/>

<target name="Init">    
    <echo message="Building ${pluginName}..." />
	<property name="tempDir" value="\builds\antbuilds"/>
	<property name="pluginName.temp.path"	value="${tempDir}/plugins/${pluginName}"/>
	<tstamp>
	    <format property="creation.time" pattern="MMdd_HHmm"/>
	</tstamp>
</target>

<target name="BuildWithoutRuntime" depends="Init">
	<echo message="Performing copy..." />
	<exportJar project="${pluginName}" exportSource="true" exportBinary="false" jarLocation="${pluginName.temp.path}"/>
	<move file="${pluginName.temp.path}/src/src-src.jar" tofile="${pluginName.temp.path}/src/logic-src.jar"/>
	<copyResources project="${pluginName}" toDir="${pluginName.temp.path}" exclude="oss_build.xml"/>
	<echo message="${pluginName} complete." />
</target>

<target name="BuildWithRuntime" depends="Init">
	<echo message="Performing copy..." />
	<exportJar project="${pluginName}" exportSource="true" exportBinary="true" jarLocation="${pluginName.temp.path}"/>
	<move file="${pluginName.temp.path}/src/src-src.jar" tofile="${pluginName.temp.path}/src/logic-src.jar"/>
	<move file="${pluginName.temp.path}/runtime/src.jar" tofile="${pluginName.temp.path}/runtime/logic.jar"/>
	<copyResources project="${pluginName}" toDir="${pluginName.temp.path}" exclude="oss_build.xml"/>
	<echo message="${pluginName} complete." />
</target>

</project>
